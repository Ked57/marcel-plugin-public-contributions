{"version":3,"sources":["main.js"],"names":["MarcelPluginPublicContributions","root","document","getElementById","Marcel","Plugin","fetch","props","backend_url","stylesvar","method","headers","response","ok","console","error","json","Object","data","usableData","keys","key","push","first","shift","template","avatarUrl","name","count","map","row","join","innerHTML","style","color","fontFamily","init"],"mappings":"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","file":"main.4f50d2a5.js","sourceRoot":"src","sourcesContent":["class MarcelPluginPublicContributions extends Marcel.Plugin {\n  constructor() {\n    super();\n    this.root = document.getElementById(\"root\");\n  }\n\n  async render() {\n    const { backend_url, stylesvar = {} } = this.props;\n\n    const response = await fetch(backend_url, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    if (!response || !response.ok) {\n      console.error(\"no response from server\");\n      return;\n    }\n    const data = await response.json();\n    const usableData = [];\n    for (key of Object.keys(data)) {\n      usableData.push(data[key]);\n    }\n    const first = usableData.shift();\n    const template = `\n    <div class=\"container\">\n      <div class=\"header\">\n        Public contributions at Zenika this month\n      </div>\n      <div class=\"info-container\">\n        ${`<div class=\"row first\">\n        <div class=\"row-item\"><img class=\"thumbnail\" src=${first.avatarUrl}></div>\n        <div class=\"row-item\">${first.name}</div>\n        <div class=\"row-item\">${first.count}</div>\n      </div>`}\n        ${usableData.map(\n          row =>\n            `<div class=\"row\">\n              <div class=\"row-item\"><img class=\"thumbnail\" src=${row.avatarUrl}></div>\n              <div class=\"row-item\">${row.name}</div>\n              <div class=\"row-item\">${row.count}</div>\n            </div>`\n        ).join(\"\")}\n      </div>\n    </div>`;\n    this.root.innerHTML = template;\n\n    // stylesvar is a special property containing the global media theme.\n    // You should use it to have a consistent style accross all the media.\n    if (stylesvar[\"primary-color\"])\n      this.root.style.color = stylesvar[\"primary-color\"];\n    if (stylesvar[\"font-family\"])\n      this.root.style.fontFamily = stylesvar[\"font-family\"];\n  }\n}\n\nMarcel.init(MarcelPluginPublicContributions);\n\n// uncomment this line to try the plugin in a browser :\n// Marcel.changeProps({ backend_url: \"http://localhost:8080\" })\n"]}